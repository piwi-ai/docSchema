{
  "id": "CAR-DEALERSHIP-IT-DEFAULT",
  "name": "Concessionario Auto Italia",
  "description": "Configurazione per gestione documenti concessionario auto / autosalone — passaggi di proprietà, finanziamenti, permute",
  "schemaVersion": 1,
  "documentTypes": [
    {
      "id": "doc-bollo",
      "name": "Attestazione Pagamento Bollo",
      "description": "Ricevuta pagamento tassa automobilistica",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "targa": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          },
          "anno": {
            "type": "number",
            "description": "Anno di riferimento del bollo"
          },
          "importo": {
            "type": "number",
            "description": "Importo pagato in Euro"
          },
          "dataScadenza": {
            "type": "string",
            "description": "Data scadenza del bollo",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "dataPagamento": {
            "type": "string",
            "description": "Data del pagamento",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          }
        },
        "required": [
          "targa",
          "anno",
          "importo"
        ]
      }
    },
    {
      "id": "doc-atto-vendita",
      "name": "Atto di Vendita / Passaggio di Proprietà",
      "description": "Contratto di compravendita veicolo con dati delle parti e del veicolo",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "venditore": {
            "type": "object",
            "properties": {
              "nome": {
                "type": "string",
                "description": "Nome (first name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
              },
              "cognome": {
                "type": "string",
                "description": "Cognome (surname/family name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
              },
              "codiceFiscale": {
                "type": "string",
                "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
                "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
              },
              "indirizzo": {
                "type": "string",
                "description": "Indirizzo di residenza del venditore"
              },
              "statoCivile": {
                "type": "string",
                "description": "Stato civile",
                "enum": [
                  "celibe",
                  "nubile",
                  "coniugato",
                  "coniugata",
                  "vedovo",
                  "vedova",
                  "divorziato",
                  "divorziata",
                  "separato",
                  "separata",
                  null
                ],
                "nullable": true
              }
            },
            "required": [
              "nome",
              "cognome",
              "codiceFiscale"
            ]
          },
          "acquirente": {
            "type": "object",
            "properties": {
              "nome": {
                "type": "string",
                "description": "Nome (first name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
              },
              "cognome": {
                "type": "string",
                "description": "Cognome (surname/family name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
              },
              "codiceFiscale": {
                "type": "string",
                "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
                "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
              },
              "indirizzo": {
                "type": "string",
                "description": "Indirizzo di residenza dell'acquirente"
              },
              "statoCivile": {
                "type": "string",
                "description": "Stato civile",
                "enum": [
                  "celibe",
                  "nubile",
                  "coniugato",
                  "coniugata",
                  "vedovo",
                  "vedova",
                  "divorziato",
                  "divorziata",
                  "separato",
                  "separata",
                  null
                ],
                "nullable": true
              }
            },
            "required": [
              "nome",
              "cognome",
              "codiceFiscale"
            ]
          },
          "targa": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          },
          "telaio": {
            "type": "string",
            "description": "Numero di telaio / VIN (Vehicle Identification Number) — 17 caratteri alfanumerici"
          },
          "marca": {
            "type": "string",
            "description": "Marca del veicolo"
          },
          "modello": {
            "type": "string",
            "description": "Modello del veicolo"
          },
          "prezzo": {
            "type": "number",
            "description": "Prezzo di vendita in Euro"
          },
          "dataVendita": {
            "type": "string",
            "description": "Data di stipula dell'atto",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "km": {
            "type": "number",
            "description": "Chilometraggio dichiarato al momento della vendita"
          },
          "modalitaPagamento": {
            "type": "string",
            "description": "Modalità di pagamento (contanti, bonifico, finanziamento, ecc.)"
          }
        },
        "required": [
          "venditore",
          "acquirente",
          "targa",
          "prezzo",
          "dataVendita"
        ]
      }
    },
    {
      "id": "doc-garanzia",
      "name": "Certificato di Garanzia",
      "description": "Garanzia convenzionale o legale sul veicolo (nuovi e usati)",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "tipoGaranzia": {
            "type": "string",
            "description": "Tipo garanzia",
            "enum": [
              "legale",
              "convenzionale",
              "estesa",
              null
            ],
            "nullable": true
          },
          "durataMesi": {
            "type": "number",
            "description": "Durata garanzia in mesi"
          },
          "kmLimite": {
            "type": "number",
            "description": "Limite chilometrico della garanzia"
          },
          "copertura": {
            "type": "string",
            "description": "Descrizione della copertura (motore, cambio, elettronica, ecc.)"
          },
          "esclusioni": {
            "type": "string",
            "description": "Eventuali esclusioni dalla garanzia"
          },
          "targa": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          },
          "dataDecorrenza": {
            "type": "string",
            "description": "Data decorrenza garanzia",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          }
        },
        "required": [
          "tipoGaranzia",
          "durataMesi",
          "targa"
        ]
      }
    },
    {
      "id": "doc-certificato-proprieta",
      "name": "Certificato di Proprietà (CDP)",
      "description": "Certificato di proprietà digitale (CDPD) — attesta la titolarità del veicolo al PRA",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "targa": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          },
          "telaio": {
            "type": "string",
            "description": "Numero di telaio / VIN (Vehicle Identification Number) — 17 caratteri alfanumerici"
          },
          "proprietario": {
            "type": "string",
            "description": "Nome e cognome / ragione sociale del proprietario"
          },
          "codiceFiscaleProprietario": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "dataAcquisto": {
            "type": "string",
            "description": "Data dell'ultima formalità di acquisto",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "formalita": {
            "type": "string",
            "description": "Tipo formalità (es. compravendita, successione, prima iscrizione)"
          },
          "vincoli": {
            "type": "string",
            "description": "Eventuali vincoli annotati (fermo amministrativo, ipoteca, leasing)"
          },
          "note": {
            "type": "string",
            "description": "Annotazioni aggiuntive"
          }
        },
        "required": [
          "targa",
          "telaio",
          "proprietario",
          "codiceFiscaleProprietario"
        ]
      }
    },
    {
      "id": "doc-revisione",
      "name": "Certificato di Revisione",
      "description": "Esito della revisione ministeriale del veicolo",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "targa": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          },
          "dataRevisione": {
            "type": "string",
            "description": "Data della revisione",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "esito": {
            "type": "string",
            "description": "Esito della revisione",
            "enum": [
              "REGOLARE",
              "RIPETERE",
              "SOSPESO",
              null
            ],
            "nullable": true
          },
          "kmRevisione": {
            "type": "number",
            "description": "Chilometraggio alla revisione"
          },
          "scadenzaProssimaRevisione": {
            "type": "string",
            "description": "Data scadenza prossima revisione",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "centroRevisione": {
            "type": "string",
            "description": "Denominazione del centro revisione"
          }
        },
        "required": [
          "targa",
          "dataRevisione",
          "esito"
        ]
      }
    },
    {
      "id": "doc-finanziamento",
      "name": "Contratto di Finanziamento",
      "description": "Contratto di finanziamento per acquisto veicolo (prestito, leasing)",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "finanziaria": {
            "type": "string",
            "description": "Nome della finanziaria / banca"
          },
          "numeroContratto": {
            "type": "string",
            "description": "Numero contratto"
          },
          "importoFinanziato": {
            "type": "number",
            "description": "Importo finanziato in Euro"
          },
          "durataRateMesi": {
            "type": "number",
            "description": "Durata in mesi"
          },
          "importoRata": {
            "type": "number",
            "description": "Importo rata mensile in Euro"
          },
          "tan": {
            "type": "number",
            "description": "Tasso Annuo Nominale (TAN) in %"
          },
          "taeg": {
            "type": "number",
            "description": "Tasso Annuo Effettivo Globale (TAEG) in %"
          },
          "anticipoVersato": {
            "type": "number",
            "description": "Anticipo versato in Euro"
          },
          "maxiRataFinale": {
            "type": "number",
            "description": "Eventuale maxi-rata finale / valore futuro garantito in Euro"
          },
          "nomeCliente": {
            "type": "string",
            "description": "Nome e cognome del cliente finanziato"
          },
          "codiceFiscaleCliente": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "targa": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          }
        },
        "required": [
          "finanziaria",
          "importoFinanziato",
          "durataRateMesi",
          "importoRata",
          "nomeCliente",
          "codiceFiscaleCliente"
        ]
      }
    },
    {
      "id": "doc-permuta",
      "name": "Dichiarazione di Permuta",
      "description": "Dichiarazione relativa al veicolo ritirato in permuta",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "targaRitirato": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          },
          "marcaRitirato": {
            "type": "string",
            "description": "Marca del veicolo ritirato"
          },
          "modelloRitirato": {
            "type": "string",
            "description": "Modello del veicolo ritirato"
          },
          "kmRitirato": {
            "type": "number",
            "description": "Chilometraggio del veicolo ritirato"
          },
          "valorePermuta": {
            "type": "number",
            "description": "Valore riconosciuto per la permuta in Euro"
          },
          "proprietarioRitirato": {
            "type": "string",
            "description": "Nome e cognome proprietario del veicolo ritirato"
          },
          "codiceFiscaleProprietario": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          }
        },
        "required": [
          "targaRitirato",
          "marcaRitirato",
          "modelloRitirato",
          "valorePermuta",
          "proprietarioRitirato"
        ]
      }
    },
    {
      "id": "doc-identita",
      "name": "Documento d'Identità",
      "description": "Documento di riconoscimento (CI, Passaporto, Patente) per identificazione e Antiriciclaggio",
      "isArrayExtraction": true,
      "jsonSchema": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string",
            "description": "Nome (first name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "cognome": {
            "type": "string",
            "description": "Cognome (surname/family name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "codiceFiscale": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "tipoDocumento": {
            "type": "string",
            "description": "Tipo documento: Carta D'Identità, Passaporto, Patente"
          },
          "numeroDocumento": {
            "type": "string",
            "description": ""
          },
          "dataEmissione": {
            "type": "string",
            "description": "Data di emissione in formato DD.MM.YYYY",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "dataScadenza": {
            "type": "string",
            "description": "Data di scadenza in formato DD.MM.YYYY",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "rilasciatoDa": {
            "type": "string",
            "description": "Autorità che ha rilasciato il documento"
          },
          "luogoNascita": {
            "type": "string",
            "description": "Città seguita dalla sigla della provincia tra parentesi tonde — formato: 'NomeCittà (XX)'"
          },
          "dataNascita": {
            "type": "string",
            "description": "Data di nascita in formato DD.MM.YYYY",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "indirizzoDiResidenza": {
            "type": "string",
            "description": "Indirizzo completo di residenza — formato: Via/Piazza Nome Numero, CAP Città (Provincia)"
          },
          "statoCivile": {
            "type": "string",
            "description": "Stato civile",
            "enum": [
              "celibe",
              "nubile",
              "coniugato",
              "coniugata",
              "vedovo",
              "vedova",
              "divorziato",
              "divorziata",
              "separato",
              "separata",
              null
            ],
            "nullable": true
          }
        },
        "required": [
          "nome",
          "cognome",
          "codiceFiscale",
          "tipoDocumento",
          "numeroDocumento",
          "dataEmissione",
          "dataScadenza",
          "luogoNascita",
          "dataNascita"
        ]
      }
    },
    {
      "id": "doc-contatto",
      "name": "Documento di Contatto",
      "description": "Recapiti e indirizzi del cliente",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string",
            "description": "Nome (first name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "cognome": {
            "type": "string",
            "description": "Cognome (surname/family name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "telefonoCellulare": {
            "type": "string",
            "description": "Numero di cellulare principale"
          },
          "telefonoFisso": {
            "type": "string",
            "description": "Eventuale numero fisso/ufficio"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Indirizzo email"
          },
          "pec": {
            "type": "string",
            "format": "email",
            "description": "Posta Elettronica Certificata"
          },
          "indirizzoResidenza": {
            "type": "string",
            "description": "Via/Piazza e numero civico"
          },
          "cittaResidenza": {
            "type": "string",
            "description": "Comune di residenza"
          },
          "cap": {
            "type": "string",
            "description": "Codice Avviamento Postale"
          },
          "provincia": {
            "type": "string",
            "description": "Sigla Provincia (es. MI, RM)"
          }
        },
        "required": [
          "nome",
          "cognome",
          "telefonoCellulare",
          "email",
          "indirizzoResidenza"
        ]
      }
    },
    {
      "id": "doc-libretto-circolazione",
      "name": "Libretto di Circolazione",
      "description": "Carta di circolazione del veicolo con dati tecnici e intestatario",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "targa": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          },
          "telaio": {
            "type": "string",
            "description": "Numero di telaio / VIN (Vehicle Identification Number) — 17 caratteri alfanumerici"
          },
          "marca": {
            "type": "string",
            "description": "Marca del veicolo (es. FIAT, BMW, Audi)"
          },
          "modello": {
            "type": "string",
            "description": "Modello del veicolo (es. Panda, Serie 3, A4)"
          },
          "allestimento": {
            "type": "string",
            "description": "Versione/allestimento se presente"
          },
          "cilindrata": {
            "type": "number",
            "description": "Cilindrata in cc"
          },
          "potenzaKw": {
            "type": "number",
            "description": "Potenza in kW"
          },
          "alimentazione": {
            "type": "string",
            "description": "Tipo alimentazione",
            "enum": [
              "benzina",
              "diesel",
              "GPL",
              "metano",
              "ibrido",
              "elettrico",
              null
            ],
            "nullable": true
          },
          "dataImmatricolazione": {
            "type": "string",
            "description": "Data di prima immatricolazione",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "massamassimaKg": {
            "type": "number",
            "description": "Massa complessiva in kg"
          },
          "posti": {
            "type": "number",
            "description": "Numero posti a sedere"
          },
          "intestatario": {
            "type": "string",
            "description": "Nome e cognome/ragione sociale intestatario"
          },
          "codiceFiscaleIntestatario": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "classeAmbientale": {
            "type": "string",
            "description": "Classe ambientale (es. Euro 6, Euro 5)"
          }
        },
        "required": [
          "targa",
          "telaio",
          "marca",
          "modello",
          "dataImmatricolazione",
          "intestatario",
          "codiceFiscaleIntestatario"
        ]
      }
    },
    {
      "id": "doc-assicurazione",
      "name": "Polizza Assicurativa RCA",
      "description": "Certificato di assicurazione obbligatoria RC Auto",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "compagnia": {
            "type": "string",
            "description": "Compagnia assicurativa"
          },
          "numeroPolizza": {
            "type": "string",
            "description": "Numero polizza"
          },
          "targa": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          },
          "contraente": {
            "type": "string",
            "description": "Nome e cognome / ragione sociale del contraente"
          },
          "codiceFiscaleContraente": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "decorrenza": {
            "type": "string",
            "description": "Data decorrenza copertura",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "scadenza": {
            "type": "string",
            "description": "Data scadenza copertura",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "massimale": {
            "type": "string",
            "description": "Massimale di copertura"
          },
          "premio": {
            "type": "number",
            "description": "Premio annuale in Euro"
          },
          "classeMerito": {
            "type": "string",
            "description": "Classe di merito (classe bonus/malus)"
          }
        },
        "required": [
          "compagnia",
          "numeroPolizza",
          "targa",
          "contraente",
          "scadenza"
        ]
      }
    },
    {
      "id": "doc-procura",
      "name": "Procura",
      "description": "Mandato a rappresentare — usata quando il passaggio è fatto per delega",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "nomeMandante": {
            "type": "string",
            "description": "Nome (first name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "cognomeMandante": {
            "type": "string",
            "description": "Cognome (surname/family name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "codiceFiscaleMandante": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "nomeMandatario": {
            "type": "string",
            "description": "Nome (first name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "cognomeMandatario": {
            "type": "string",
            "description": "Cognome (surname/family name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "codiceFiscaleMandatario": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "oggetto": {
            "type": "string",
            "description": "Oggetto della procura (es. vendita/acquisto veicolo targa XX000YY)"
          },
          "dataStipula": {
            "type": "string",
            "description": "Data della procura",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          }
        },
        "required": [
          "nomeMandante",
          "cognomeMandante",
          "codiceFiscaleMandante",
          "nomeMandatario",
          "cognomeMandatario",
          "oggetto"
        ]
      }
    },
    {
      "id": "doc-scheda-tecnica",
      "name": "Scheda Tecnica Veicolo",
      "description": "Scheda tecnica/commerciale del veicolo con optionals e allestimento",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "marca": {
            "type": "string",
            "description": "Marca"
          },
          "modello": {
            "type": "string",
            "description": "Modello"
          },
          "allestimento": {
            "type": "string",
            "description": "Livello di allestimento (es. Lounge, Sport, Executive)"
          },
          "annoModello": {
            "type": "number",
            "description": "Anno modello"
          },
          "coloreEsterno": {
            "type": "string",
            "description": "Colore carrozzeria"
          },
          "coloreInterno": {
            "type": "string",
            "description": "Colore e materiale interni"
          },
          "optionals": {
            "type": "string",
            "description": "Lista optionals inclusi (separati da virgola)"
          },
          "prezzoListino": {
            "type": "number",
            "description": "Prezzo di listino in Euro"
          }
        },
        "required": [
          "marca",
          "modello"
        ]
      }
    },
    {
      "id": "doc-tessera-sanitaria",
      "name": "Tessera Sanitaria",
      "description": "Tessera sanitaria / Codice Fiscale — conferma CF e dati anagrafici",
      "isArrayExtraction": true,
      "jsonSchema": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string",
            "description": "Nome (first name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "cognome": {
            "type": "string",
            "description": "Cognome (surname/family name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "codiceFiscale": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "sesso": {
            "type": "string",
            "description": "Sesso",
            "enum": [
              "M",
              "F",
              null
            ],
            "nullable": true
          },
          "dataNascita": {
            "type": "string",
            "description": "Data di nascita",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "luogoNascita": {
            "type": "string",
            "description": "Comune di nascita"
          },
          "dataScadenza": {
            "type": "string",
            "description": "Data di scadenza",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          }
        },
        "required": [
          "nome",
          "cognome",
          "codiceFiscale",
          "sesso",
          "dataNascita"
        ]
      }
    },
    {
      "id": "doc-visura-camerale",
      "name": "Visura Camerale",
      "description": "Visura CCIAA — necessaria quando venditore o acquirente è persona giuridica",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "ragioneSociale": {
            "type": "string",
            "description": "Ragione sociale / denominazione"
          },
          "partitaIva": {
            "type": "string",
            "description": "Partita IVA"
          },
          "codiceFiscale": {
            "type": "string",
            "description": "Codice fiscale dell'impresa"
          },
          "sedeLegale": {
            "type": "string",
            "description": "Indirizzo sede legale"
          },
          "legaleRappresentante": {
            "type": "string",
            "description": "Nome e cognome del legale rappresentante"
          },
          "cfLegaleRappresentante": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "codiceAteco": {
            "type": "string",
            "description": "Codice ATECO principale"
          },
          "statoImpresa": {
            "type": "string",
            "description": "Stato dell'impresa",
            "enum": [
              "attiva",
              "inattiva",
              "cessata",
              "in liquidazione",
              null
            ],
            "nullable": true
          },
          "dataIscrizione": {
            "type": "string",
            "description": "Data iscrizione alla Camera di Commercio",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "rea": {
            "type": "string",
            "description": "Numero REA"
          }
        },
        "required": [
          "ragioneSociale",
          "partitaIva",
          "legaleRappresentante"
        ]
      }
    },
    {
      "id": "doc-visura-pra",
      "name": "Visura PRA",
      "description": "Visura del Pubblico Registro Automobilistico — gravami, fermi, ipoteche",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "targa": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          },
          "telaio": {
            "type": "string",
            "description": "Numero di telaio / VIN (Vehicle Identification Number) — 17 caratteri alfanumerici"
          },
          "proprietario": {
            "type": "string",
            "description": "Proprietario attuale"
          },
          "codiceFiscaleProprietario": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "fermoAmministrativo": {
            "type": "string",
            "description": "Fermo amministrativo presente",
            "enum": [
              "sì",
              "no",
              null
            ],
            "nullable": true
          },
          "ipoteche": {
            "type": "string",
            "description": "Eventuali ipoteche iscritte"
          },
          "gravami": {
            "type": "string",
            "description": "Elenco gravami risultanti"
          },
          "dataVisura": {
            "type": "string",
            "description": "Data della visura",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          }
        },
        "required": [
          "targa",
          "proprietario",
          "fermoAmministrativo"
        ]
      }
    }
  ],
  "entityTypes": [
    {
      "id": "entity-venditore",
      "name": "Venditore",
      "icon": "user-minus",
      "color": "#ef4444",
      "displayOrder": 0,
      "fieldOrder": [
        "nome",
        "cognome",
        "codiceFiscale",
        "indirizzoDiResidenza",
        "dataNascita",
        "luogoNascita",
        "statoCivile"
      ],
      "dataSources": [
        {
          "docTypeId": "doc-identita",
          "enabled": true,
          "isRequired": true,
          "canCreateEntity": true,
          "fieldMappings": [
            {
              "sourceField": "nome",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "cognome",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "codiceFiscale",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "dataNascita",
              "targetField": "dataNascita",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "luogoNascita",
              "targetField": "luogoNascita",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "indirizzoDiResidenza",
              "targetField": "indirizzoDiResidenza",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "statoCivile",
              "targetField": "statoCivile",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-tessera-sanitaria",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "nome",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "cognome",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "codiceFiscale",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "dataNascita",
              "targetField": "dataNascita",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-atto-vendita",
          "enabled": true,
          "canCreateEntity": true,
          "fieldMappings": [
            {
              "sourceField": "venditore.nome",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "venditore.cognome",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "venditore.codiceFiscale",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "venditore.indirizzo",
              "targetField": "indirizzoDiResidenza",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "venditore.statoCivile",
              "targetField": "statoCivile",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-certificato-proprieta",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "proprietario",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "codiceFiscaleProprietario",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-contatto",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "nome",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "cognome",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-procura",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "nomeMandante",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "cognomeMandante",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "codiceFiscaleMandante",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        }
      ],
      "conditionalRequirements": [
        {
          "docTypeId": "doc-visura-camerale",
          "enabled": true,
          "conditions": [
            {
              "sourceDocTypeId": "doc-atto-vendita",
              "field": "venditore.codiceFiscale",
              "operator": "lengthGreaterThan",
              "value": "11"
            }
          ]
        }
      ]
    },
    {
      "id": "entity-acquirente",
      "name": "Acquirente",
      "icon": "user-plus",
      "color": "#22c55e",
      "displayOrder": 1,
      "fieldOrder": [
        "nome",
        "cognome",
        "codiceFiscale",
        "indirizzoDiResidenza",
        "dataNascita",
        "luogoNascita",
        "statoCivile"
      ],
      "dataSources": [
        {
          "docTypeId": "doc-identita",
          "enabled": true,
          "isRequired": true,
          "canCreateEntity": true,
          "fieldMappings": [
            {
              "sourceField": "nome",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "cognome",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "codiceFiscale",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "dataNascita",
              "targetField": "dataNascita",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "luogoNascita",
              "targetField": "luogoNascita",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "indirizzoDiResidenza",
              "targetField": "indirizzoDiResidenza",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "statoCivile",
              "targetField": "statoCivile",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-tessera-sanitaria",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "nome",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "cognome",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "codiceFiscale",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "dataNascita",
              "targetField": "dataNascita",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-atto-vendita",
          "enabled": true,
          "canCreateEntity": true,
          "fieldMappings": [
            {
              "sourceField": "acquirente.nome",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "acquirente.cognome",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "acquirente.codiceFiscale",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "acquirente.indirizzo",
              "targetField": "indirizzoDiResidenza",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "acquirente.statoCivile",
              "targetField": "statoCivile",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-finanziamento",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "nomeCliente",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "codiceFiscaleCliente",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-contatto",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "nome",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "cognome",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-procura",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "nomeMandante",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "cognomeMandante",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "codiceFiscaleMandante",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        }
      ],
      "conditionalRequirements": [
        {
          "docTypeId": "doc-visura-camerale",
          "enabled": true,
          "conditions": [
            {
              "sourceDocTypeId": "doc-atto-vendita",
              "field": "acquirente.codiceFiscale",
              "operator": "lengthGreaterThan",
              "value": "11"
            }
          ]
        },
        {
          "docTypeId": "doc-finanziamento",
          "enabled": true,
          "conditions": [
            {
              "sourceDocTypeId": "doc-atto-vendita",
              "field": "modalitaPagamento",
              "operator": "contains",
              "value": "finanz"
            }
          ]
        }
      ]
    },
    {
      "id": "entity-veicolo",
      "name": "Veicolo",
      "icon": "car",
      "color": "#3b82f6",
      "displayOrder": 2,
      "fieldOrder": [
        "targa",
        "telaio",
        "marca",
        "modello",
        "allestimento",
        "dataImmatricolazione",
        "cilindrata",
        "potenzaKw",
        "alimentazione",
        "classeAmbientale",
        "km"
      ],
      "dataSources": [
        {
          "docTypeId": "doc-libretto-circolazione",
          "enabled": true,
          "isRequired": true,
          "canCreateEntity": true,
          "fieldMappings": [
            {
              "sourceField": "targa",
              "targetField": "targa",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "telaio",
              "targetField": "telaio",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "marca",
              "targetField": "marca",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "modello",
              "targetField": "modello",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "allestimento",
              "targetField": "allestimento",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "dataImmatricolazione",
              "targetField": "dataImmatricolazione",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "cilindrata",
              "targetField": "cilindrata",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "potenzaKw",
              "targetField": "potenzaKw",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "alimentazione",
              "targetField": "alimentazione",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "classeAmbientale",
              "targetField": "classeAmbientale",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-certificato-proprieta",
          "enabled": true,
          "isRequired": true,
          "canCreateEntity": true,
          "fieldMappings": [
            {
              "sourceField": "targa",
              "targetField": "targa",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "telaio",
              "targetField": "telaio",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-visura-pra",
          "enabled": true,
          "isRequired": true,
          "fieldMappings": [
            {
              "sourceField": "targa",
              "targetField": "targa",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "telaio",
              "targetField": "telaio",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-atto-vendita",
          "enabled": true,
          "canCreateEntity": true,
          "fieldMappings": [
            {
              "sourceField": "targa",
              "targetField": "targa",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "telaio",
              "targetField": "telaio",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "marca",
              "targetField": "marca",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "modello",
              "targetField": "modello",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "km",
              "targetField": "km",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-assicurazione",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "targa",
              "targetField": "targa",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-revisione",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "targa",
              "targetField": "targa",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "kmRevisione",
              "targetField": "km",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-garanzia",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "targa",
              "targetField": "targa",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-scheda-tecnica",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "marca",
              "targetField": "marca",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "modello",
              "targetField": "modello",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "allestimento",
              "targetField": "allestimento",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        }
      ],
      "conditionalRequirements": [
        {
          "docTypeId": "doc-revisione",
          "enabled": true,
          "conditions": [
            {
              "sourceDocTypeId": "doc-libretto-circolazione",
              "field": "dataImmatricolazione",
              "operator": "exists",
              "value": "true"
            }
          ]
        }
      ]
    },
    {
      "id": "entity-transazione",
      "name": "Transazione",
      "icon": "banknote",
      "color": "#f59e0b",
      "displayOrder": 3,
      "fieldOrder": [
        "prezzo",
        "modalitaPagamento",
        "dataVendita",
        "km",
        "valorePermuta",
        "importoFinanziato",
        "importoRata",
        "durataRateMesi"
      ],
      "dataSources": [
        {
          "docTypeId": "doc-atto-vendita",
          "enabled": true,
          "isRequired": true,
          "canCreateEntity": true,
          "fieldMappings": [
            {
              "sourceField": "prezzo",
              "targetField": "prezzo"
            },
            {
              "sourceField": "dataVendita",
              "targetField": "dataVendita"
            },
            {
              "sourceField": "km",
              "targetField": "km"
            },
            {
              "sourceField": "modalitaPagamento",
              "targetField": "modalitaPagamento"
            }
          ]
        },
        {
          "docTypeId": "doc-finanziamento",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "importoFinanziato",
              "targetField": "importoFinanziato"
            },
            {
              "sourceField": "importoRata",
              "targetField": "importoRata"
            },
            {
              "sourceField": "durataRateMesi",
              "targetField": "durataRateMesi"
            },
            {
              "sourceField": "tan",
              "targetField": "tan"
            },
            {
              "sourceField": "taeg",
              "targetField": "taeg"
            }
          ]
        },
        {
          "docTypeId": "doc-permuta",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "valorePermuta",
              "targetField": "valorePermuta"
            }
          ]
        }
      ],
      "conditionalRequirements": []
    }
  ],
  "documentWorkflows": [
    {
      "id": "wf-doc-extraction",
      "name": "Document Extraction",
      "isDefault": true,
      "enabled": true,
      "priority": 2,
      "nodes": [
        {
          "id": "load-document",
          "type": "serviceCall",
          "position": {
            "x": 300,
            "y": 50
          },
          "data": {
            "nodeType": "serviceCall",
            "label": "Load Document",
            "status": "IDLE",
            "config": {
              "serviceName": "documentService",
              "methodName": "getById",
              "arguments": {
                "id": "context.docId"
              },
              "outputMapping": {
                "doc": "doc"
              }
            }
          }
        },
        {
          "id": "check-doctype",
          "type": "ifElse",
          "position": {
            "x": 300,
            "y": 200
          },
          "data": {
            "nodeType": "ifElse",
            "label": "Has DocumentType?",
            "status": "IDLE",
            "config": {
              "condition": "context.doc.docTypeId && context.doc.docTypeId !== null"
            }
          }
        },
        {
          "id": "notify-no-doctype",
          "type": "serviceCall",
          "position": {
            "x": 650,
            "y": 200
          },
          "data": {
            "nodeType": "serviceCall",
            "label": "Notify: No DocType",
            "status": "IDLE",
            "config": {
              "serviceName": "notificationService",
              "methodName": "create",
              "arguments": {
                "notification": {
                  "title": "Extraction Stopped",
                  "message": "No DocumentType set for this document. Cannot extract data.",
                  "type": "error"
                }
              }
            }
          }
        },
        {
          "id": "load-schema",
          "type": "serviceCall",
          "position": {
            "x": 300,
            "y": 350
          },
          "data": {
            "nodeType": "serviceCall",
            "label": "Load Extraction Schema",
            "status": "IDLE",
            "config": {
              "serviceName": "projectService",
              "methodName": "getExtractionSchema",
              "arguments": {
                "id": "context.doc.docTypeId"
              },
              "outputMapping": "data.schema"
            }
          }
        },
        {
          "id": "ai-extract",
          "type": "aiInteraction",
          "position": {
            "x": 300,
            "y": 500
          },
          "data": {
            "nodeType": "aiInteraction",
            "label": "AI: Extract Data",
            "status": "IDLE",
            "config": {
              "aiConfig": {
                "provider": "vertex",
                "model": "gemini-3-flash-preview",
                "prompt": "You are a document processing system helping with legitimate data extraction for record keeping purposes. Extract all visible field values from this official document according to the provided JSON schema.\n\nCRITICAL ACCURACY REQUIREMENTS:\n- Transcribe ALL text EXACTLY as it appears on the document, character-by-character\n- Do NOT modify, correct, or reformat any values\n- Preserve exact capitalization, spacing, and punctuation\n- For codes/IDs: copy every character precisely (numbers, letters, special characters)\n- If a field is not visible or empty, use empty string \"\" (NOT null, NOT the word \"null\")\n- Double-check each value before including it\n\nCHARACTER CONFUSION PREVENTION (VERY IMPORTANT):\n- Carefully distinguish between similar-looking characters\n- Letter 'I' (uppercase i) vs Number '1' (one)\n- Letter 'O' (uppercase o) vs Number '0' (zero)\n- Letter 'T' vs Number '7'\n- Letter 'S' vs Number '5'\n- Letter 'B' vs Number '8'\n- Letter 'Z' vs Number '2'\n- Letter 'G' vs Number '6'\n- For Codice Fiscale: contains ONLY uppercase letters (A-Z) and numbers (0-9), 16 characters total, no spaces\n\nFREE-TEXT / SUMMARY FIELDS:\n- Copy text VERBATIM from the document — do NOT paraphrase, summarize, or rephrase\n- Keep the original punctuation, list format (dashes, semicolons), and paragraph structure\n- Do NOT add information not explicitly present in the document\n- Do NOT reorder content or change list bullet styles\n\nVALUE NORMALIZATION:\n- For place names: copy EXACTLY as written on the document (do NOT add province codes or extra info not present)\n- For floor/piano fields: use only the numeric value or code (e.g. \"2\", \"S1\", \"T\", NOT \"2 (Secondo)\" or \"Piano Secondo\")\n- For amounts: numbers only, no currency symbols unless explicitly shown in the original text\n\nReturn ONLY valid JSON matching the schema structure. This is an authorized document processing request.",
                "input": "context.docId",
                "inputType": "pdf",
                "pages": "all",
                "jsonSchema": "data.schema",
                "outputKey": "data.data1",
                "isJson": true,
                "thinkingLevel": "low"
              }
            }
          }
        },
        {
          "id": "ai-verify",
          "type": "aiInteraction",
          "position": {
            "x": 300,
            "y": 700
          },
          "data": {
            "nodeType": "aiInteraction",
            "label": "AI: Verify Extraction",
            "status": "IDLE",
            "config": {
              "aiConfig": {
                "provider": "vertex",
                "model": "gemini-3-flash-preview",
                "prompt": "You are a document verification system. You have been given:\n1. A document (images/PDF)\n2. A previous extraction attempt (JSON) from another AI\n\nYour task:\n- Cross-reference EVERY field in the previous extraction against the actual document\n- Correct any errors: typos, OCR misreads, formatting inconsistencies, missing values\n- Fill in any fields that were missed (use \"\" for genuinely absent fields)\n- Apply the same extraction rules: character-by-character accuracy, no modification of original values, proper normalization\n\nFor each field, assign a confidence score (0.0 to 1.0):\n- 1.0 = clearly legible, no ambiguity\n- 0.7-0.9 = legible but minor ambiguity (e.g. similar-looking characters)\n- 0.3-0.6 = partially legible or context-dependent\n- 0.0-0.2 = guessed or not visible in document\n\nReturn a JSON object with:\n- \"data\": the corrected extraction matching the schema\n- \"corrections\": array of { field, original, corrected, reason } for each change made\n- \"confidence\": object mapping field names to confidence scores (0.0-1.0)\n\nReturn ONLY valid JSON.",
                "input": "context.docId",
                "inputType": "pdf",
                "pages": "all",
                "jsonSchema": "data.schema",
                "outputKey": "data.data2",
                "isJson": true,
                "thinkingLevel": "medium",
                "contextInput": "data.data1",
                "verificationMode": true
              }
            }
          }
        },
        {
          "id": "validate-extraction",
          "type": "validateExtraction",
          "position": {
            "x": 300,
            "y": 900
          },
          "data": {
            "nodeType": "validateExtraction",
            "label": "Validate & Score",
            "status": "IDLE",
            "config": {
              "data1Key": "data.data1",
              "data2Key": "data.data2",
              "outputKey": "data.extractedData"
            }
          }
        },
        {
          "id": "save-results",
          "type": "serviceCall",
          "position": {
            "x": 300,
            "y": 1100
          },
          "data": {
            "nodeType": "serviceCall",
            "label": "Save Results",
            "status": "IDLE",
            "config": {
              "serviceName": "documentService",
              "methodName": "update",
              "arguments": {
                "id": "context.docId",
                "updates": {
                  "extractedData": "context.data.extractedData",
                  "doubleValidation": "context.data.doubleValidation",
                  "extractionConflicts": "context.data.extractionConflicts",
                  "confidenceScore": "context.data.confidenceScore",
                  "fieldConfidence": "context.data.fieldConfidence",
                  "error": "context.data.error"
                }
              }
            }
          }
        },
        {
          "id": "notify-success",
          "type": "serviceCall",
          "position": {
            "x": 300,
            "y": 1150
          },
          "data": {
            "nodeType": "serviceCall",
            "label": "Notify Success",
            "status": "IDLE",
            "config": {
              "serviceName": "notificationService",
              "methodName": "create",
              "arguments": {
                "notification": {
                  "title": "Document Processing Complete",
                  "message": "Document \"{{doc.name}}\" has been successfully processed.",
                  "type": "success",
                  "actionUrl": "/documents/{{docId}}"
                }
              }
            }
          }
        }
      ],
      "edges": [
        {
          "id": "e-load-doc-check",
          "source": "load-document",
          "target": "check-doctype",
          "type": "default"
        },
        {
          "id": "e-check-load-schema",
          "source": "check-doctype",
          "sourceHandle": "true",
          "target": "load-schema",
          "type": "default"
        },
        {
          "id": "e-check-notify-no",
          "source": "check-doctype",
          "sourceHandle": "false",
          "target": "notify-no-doctype",
          "type": "default"
        },
        {
          "id": "e-schema-extract",
          "source": "load-schema",
          "target": "ai-extract",
          "type": "default"
        },
        {
          "id": "e-extract-verify",
          "source": "ai-extract",
          "target": "ai-verify",
          "type": "default"
        },
        {
          "id": "e-verify-validate",
          "source": "ai-verify",
          "target": "validate-extraction",
          "type": "default"
        },
        {
          "id": "e-validate-save",
          "source": "validate-extraction",
          "target": "save-results",
          "type": "default"
        },
        {
          "id": "e-save-notify",
          "source": "save-results",
          "target": "notify-success",
          "type": "default"
        }
      ]
    },
    {
      "id": "wf-doc-identification",
      "name": "Document Identification",
      "isDefault": true,
      "enabled": true,
      "priority": 1,
      "nodes": [
        {
          "id": "get-document",
          "type": "serviceCall",
          "position": {
            "x": 300,
            "y": 50
          },
          "data": {
            "nodeType": "serviceCall",
            "label": "Get Document",
            "status": "IDLE",
            "config": {
              "serviceName": "documentService",
              "methodName": "getById",
              "arguments": {
                "id": "context.docId"
              },
              "outputMapping": {
                "doc": "doc"
              }
            }
          }
        },
        {
          "id": "check-has-doctype",
          "type": "ifElse",
          "position": {
            "x": 300,
            "y": 250
          },
          "data": {
            "nodeType": "ifElse",
            "label": "Has DocumentType?",
            "status": "IDLE",
            "config": {
              "condition": "!context.doc.docTypeId || context.doc.docTypeId === null"
            }
          }
        },
        {
          "id": "notify-already-exists",
          "type": "serviceCall",
          "position": {
            "x": 650,
            "y": 250
          },
          "data": {
            "nodeType": "serviceCall",
            "label": "Notify: Already Exists",
            "status": "IDLE",
            "config": {
              "serviceName": "notificationService",
              "methodName": "create",
              "arguments": {
                "notification": {
                  "title": "Document Processing Stopped",
                  "message": "DocumentType already exists for this document.",
                  "type": "warning"
                }
              }
            }
          }
        },
        {
          "id": "get-doctypes",
          "type": "serviceCall",
          "position": {
            "x": 300,
            "y": 650
          },
          "data": {
            "nodeType": "serviceCall",
            "label": "Get Type Names",
            "status": "IDLE",
            "config": {
              "serviceName": "projectService",
              "methodName": "getIdentificationJSONSchema",
              "arguments": {},
              "outputMapping": "data.schema"
            }
          }
        },
        {
          "id": "ai-identify-1",
          "type": "aiInteraction",
          "position": {
            "x": 100,
            "y": 850
          },
          "data": {
            "nodeType": "aiInteraction",
            "label": "AI: Identify Type #1",
            "status": "IDLE",
            "config": {
              "aiConfig": {
                "provider": "vertex",
                "model": "gemini-3-flash-preview",
                "prompt": "You are a document classification system. Analyze the document structure and content to identify its type. You MUST select one of the valid types from the provided schema. Classify this document.",
                "input": "context.docId",
                "inputType": "pdf",
                "pages": 1,
                "jsonSchema": "data.schema",
                "outputKey": "data.type1",
                "isJson": true,
                "thinkingLevel": "minimal"
              }
            }
          }
        },
        {
          "id": "ai-identify-2",
          "type": "aiInteraction",
          "position": {
            "x": 500,
            "y": 850
          },
          "data": {
            "nodeType": "aiInteraction",
            "label": "AI: Identify Type #2",
            "status": "IDLE",
            "config": {
              "aiConfig": {
                "provider": "vertex",
                "model": "gemini-3-flash-preview",
                "prompt": "You are a document classification system. Analyze the document structure and content to identify its type. You MUST select one of the valid types from the provided schema. Classify this document.",
                "input": "context.docId",
                "inputType": "pdf",
                "pages": 1,
                "jsonSchema": "data.schema",
                "outputKey": "data.type2",
                "isJson": true,
                "thinkingLevel": "minimal"
              }
            }
          }
        },
        {
          "id": "validate-type-match",
          "type": "validateExtraction",
          "position": {
            "x": 300,
            "y": 1050
          },
          "data": {
            "nodeType": "validateExtraction",
            "label": "Validate Type Match",
            "status": "IDLE",
            "config": {
              "data1Key": "data.type1.documentType",
              "data2Key": "data.type2.documentType",
              "outputKey": "data.identifiedType"
            }
          }
        },
        {
          "id": "lookup-doctype",
          "type": "serviceCall",
          "position": {
            "x": 300,
            "y": 1250
          },
          "data": {
            "nodeType": "serviceCall",
            "label": "Lookup Document Type",
            "status": "IDLE",
            "config": {
              "serviceName": "projectService",
              "methodName": "getDocumentTypeByName",
              "arguments": {
                "name": "{{data.identifiedType}}"
              },
              "outputMapping": "data.foundDocType"
            }
          }
        },
        {
          "id": "check-type-exists",
          "type": "ifElse",
          "position": {
            "x": 300,
            "y": 1450
          },
          "data": {
            "nodeType": "ifElse",
            "label": "Type Exists?",
            "status": "IDLE",
            "config": {
              "condition": "!!context.data.foundDocType && !!context.data.foundDocType.id"
            }
          }
        },
        {
          "id": "notify-type-not-found",
          "type": "serviceCall",
          "position": {
            "x": 550,
            "y": 1650
          },
          "data": {
            "nodeType": "serviceCall",
            "label": "Notify: Type Not Found",
            "status": "IDLE",
            "config": {
              "serviceName": "notificationService",
              "methodName": "create",
              "arguments": {
                "notification": {
                  "title": "Document Type Not Found",
                  "message": "Identified type '{{data.identifiedType}}' does not exist in the system.",
                  "type": "warning"
                }
              }
            }
          }
        },
        {
          "id": "assign-doctype",
          "type": "serviceCall",
          "position": {
            "x": 50,
            "y": 1650
          },
          "data": {
            "nodeType": "serviceCall",
            "label": "Assign DocType",
            "status": "IDLE",
            "config": {
              "serviceName": "documentService",
              "methodName": "update",
              "arguments": {
                "id": "context.docId",
                "updates": {
                  "docTypeId": "{{data.foundDocType.id}}"
                }
              }
            }
          }
        }
      ],
      "edges": [
        {
          "id": "e-get-check",
          "source": "get-document",
          "target": "check-has-doctype",
          "type": "default"
        },
        {
          "id": "e-check-gettypes",
          "source": "check-has-doctype",
          "sourceHandle": "true",
          "target": "get-doctypes",
          "type": "default"
        },
        {
          "id": "e-check-exists",
          "source": "check-has-doctype",
          "sourceHandle": "false",
          "target": "notify-already-exists",
          "type": "default"
        },
        {
          "id": "e-gettypes-ai1",
          "source": "get-doctypes",
          "target": "ai-identify-1",
          "type": "default"
        },
        {
          "id": "e-ai1-ai2",
          "source": "ai-identify-1",
          "target": "ai-identify-2",
          "type": "default"
        },
        {
          "id": "e-ai2-validate",
          "source": "ai-identify-2",
          "target": "validate-type-match",
          "type": "default"
        },
        {
          "id": "e-validate-lookup",
          "source": "validate-type-match",
          "target": "lookup-doctype",
          "type": "default"
        },
        {
          "id": "e-lookup-check",
          "source": "lookup-doctype",
          "target": "check-type-exists",
          "type": "default"
        },
        {
          "id": "e-check-assign",
          "source": "check-type-exists",
          "sourceHandle": "true",
          "target": "assign-doctype",
          "type": "default"
        },
        {
          "id": "e-check-notfound",
          "source": "check-type-exists",
          "sourceHandle": "false",
          "target": "notify-type-not-found",
          "type": "default"
        }
      ]
    }
  ],
  "createdAt": "2026-02-14T21:13:21.775Z",
  "updatedAt": "2026-02-14T21:13:21.775Z"
}