{
  "id": "CAR-DEALERSHIP-IT-DEFAULT",
  "name": "Concessionario Auto Italia",
  "description": "Configurazione per gestione documenti concessionario auto / autosalone — passaggi di proprietà, finanziamenti, permute",
  "schemaVersion": 1,
  "documentTypes": [
    {
      "id": "doc-bollo",
      "name": "Attestazione Pagamento Bollo",
      "description": "Ricevuta pagamento tassa automobilistica",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "targa": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          },
          "anno": {
            "type": "number",
            "description": "Anno di riferimento del bollo"
          },
          "importo": {
            "type": "number",
            "description": "Importo pagato in Euro"
          },
          "dataScadenza": {
            "type": "string",
            "description": "Data scadenza del bollo",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "dataPagamento": {
            "type": "string",
            "description": "Data del pagamento",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          }
        },
        "required": [
          "targa",
          "anno",
          "importo"
        ]
      }
    },
    {
      "id": "doc-atto-vendita",
      "name": "Atto di Vendita / Passaggio di Proprietà",
      "description": "Contratto di compravendita veicolo con dati delle parti e del veicolo",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "venditore": {
            "type": "object",
            "properties": {
              "nome": {
                "type": "string",
                "description": "Nome (first name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
              },
              "cognome": {
                "type": "string",
                "description": "Cognome (surname/family name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
              },
              "codiceFiscale": {
                "type": "string",
                "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
                "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
              },
              "indirizzo": {
                "type": "string",
                "description": "Indirizzo di residenza del venditore"
              },
              "statoCivile": {
                "type": "string",
                "description": "Stato civile",
                "enum": [
                  "celibe",
                  "nubile",
                  "coniugato",
                  "coniugata",
                  "vedovo",
                  "vedova",
                  "divorziato",
                  "divorziata",
                  "separato",
                  "separata",
                  null
                ],
                "nullable": true
              }
            },
            "required": [
              "nome",
              "cognome",
              "codiceFiscale"
            ]
          },
          "acquirente": {
            "type": "object",
            "properties": {
              "nome": {
                "type": "string",
                "description": "Nome (first name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
              },
              "cognome": {
                "type": "string",
                "description": "Cognome (surname/family name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
              },
              "codiceFiscale": {
                "type": "string",
                "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
                "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
              },
              "indirizzo": {
                "type": "string",
                "description": "Indirizzo di residenza dell'acquirente"
              },
              "statoCivile": {
                "type": "string",
                "description": "Stato civile",
                "enum": [
                  "celibe",
                  "nubile",
                  "coniugato",
                  "coniugata",
                  "vedovo",
                  "vedova",
                  "divorziato",
                  "divorziata",
                  "separato",
                  "separata",
                  null
                ],
                "nullable": true
              }
            },
            "required": [
              "nome",
              "cognome",
              "codiceFiscale"
            ]
          },
          "targa": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          },
          "telaio": {
            "type": "string",
            "description": "Numero di telaio / VIN (Vehicle Identification Number) — 17 caratteri alfanumerici"
          },
          "marca": {
            "type": "string",
            "description": "Marca del veicolo"
          },
          "modello": {
            "type": "string",
            "description": "Modello del veicolo"
          },
          "prezzo": {
            "type": "number",
            "description": "Prezzo di vendita in Euro"
          },
          "dataVendita": {
            "type": "string",
            "description": "Data di stipula dell'atto",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "km": {
            "type": "number",
            "description": "Chilometraggio dichiarato al momento della vendita"
          },
          "modalitaPagamento": {
            "type": "string",
            "description": "Modalità di pagamento (contanti, bonifico, finanziamento, ecc.)"
          }
        },
        "required": [
          "venditore",
          "acquirente",
          "targa",
          "prezzo",
          "dataVendita"
        ]
      }
    },
    {
      "id": "doc-garanzia",
      "name": "Certificato di Garanzia",
      "description": "Garanzia convenzionale o legale sul veicolo (nuovi e usati)",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "tipoGaranzia": {
            "type": "string",
            "description": "Tipo garanzia",
            "enum": [
              "legale",
              "convenzionale",
              "estesa",
              null
            ],
            "nullable": true
          },
          "durataMesi": {
            "type": "number",
            "description": "Durata garanzia in mesi"
          },
          "kmLimite": {
            "type": "number",
            "description": "Limite chilometrico della garanzia"
          },
          "copertura": {
            "type": "string",
            "description": "Descrizione della copertura (motore, cambio, elettronica, ecc.)"
          },
          "esclusioni": {
            "type": "string",
            "description": "Eventuali esclusioni dalla garanzia"
          },
          "targa": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          },
          "dataDecorrenza": {
            "type": "string",
            "description": "Data decorrenza garanzia",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          }
        },
        "required": [
          "tipoGaranzia",
          "durataMesi",
          "targa"
        ]
      }
    },
    {
      "id": "doc-certificato-proprieta",
      "name": "Certificato di Proprietà (CDP)",
      "description": "Certificato di proprietà digitale (CDPD) — attesta la titolarità del veicolo al PRA",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "targa": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          },
          "telaio": {
            "type": "string",
            "description": "Numero di telaio / VIN (Vehicle Identification Number) — 17 caratteri alfanumerici"
          },
          "proprietario": {
            "type": "string",
            "description": "Nome e cognome / ragione sociale del proprietario"
          },
          "codiceFiscaleProprietario": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "dataAcquisto": {
            "type": "string",
            "description": "Data dell'ultima formalità di acquisto",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "formalita": {
            "type": "string",
            "description": "Tipo formalità (es. compravendita, successione, prima iscrizione)"
          },
          "vincoli": {
            "type": "string",
            "description": "Eventuali vincoli annotati (fermo amministrativo, ipoteca, leasing)"
          },
          "note": {
            "type": "string",
            "description": "Annotazioni aggiuntive"
          }
        },
        "required": [
          "targa",
          "telaio",
          "proprietario",
          "codiceFiscaleProprietario"
        ]
      }
    },
    {
      "id": "doc-revisione",
      "name": "Certificato di Revisione",
      "description": "Esito della revisione ministeriale del veicolo",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "targa": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          },
          "dataRevisione": {
            "type": "string",
            "description": "Data della revisione",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "esito": {
            "type": "string",
            "description": "Esito della revisione",
            "enum": [
              "REGOLARE",
              "RIPETERE",
              "SOSPESO",
              null
            ],
            "nullable": true
          },
          "kmRevisione": {
            "type": "number",
            "description": "Chilometraggio alla revisione"
          },
          "scadenzaProssimaRevisione": {
            "type": "string",
            "description": "Data scadenza prossima revisione",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "centroRevisione": {
            "type": "string",
            "description": "Denominazione del centro revisione"
          }
        },
        "required": [
          "targa",
          "dataRevisione",
          "esito"
        ]
      }
    },
    {
      "id": "doc-finanziamento",
      "name": "Contratto di Finanziamento",
      "description": "Contratto di finanziamento per acquisto veicolo (prestito, leasing)",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "finanziaria": {
            "type": "string",
            "description": "Nome della finanziaria / banca"
          },
          "numeroContratto": {
            "type": "string",
            "description": "Numero contratto"
          },
          "importoFinanziato": {
            "type": "number",
            "description": "Importo finanziato in Euro"
          },
          "durataRateMesi": {
            "type": "number",
            "description": "Durata in mesi"
          },
          "importoRata": {
            "type": "number",
            "description": "Importo rata mensile in Euro"
          },
          "tan": {
            "type": "number",
            "description": "Tasso Annuo Nominale (TAN) in %"
          },
          "taeg": {
            "type": "number",
            "description": "Tasso Annuo Effettivo Globale (TAEG) in %"
          },
          "anticipoVersato": {
            "type": "number",
            "description": "Anticipo versato in Euro"
          },
          "maxiRataFinale": {
            "type": "number",
            "description": "Eventuale maxi-rata finale / valore futuro garantito in Euro"
          },
          "nomeCliente": {
            "type": "string",
            "description": "Nome e cognome del cliente finanziato"
          },
          "codiceFiscaleCliente": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "targa": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          }
        },
        "required": [
          "finanziaria",
          "importoFinanziato",
          "durataRateMesi",
          "importoRata",
          "nomeCliente",
          "codiceFiscaleCliente"
        ]
      }
    },
    {
      "id": "doc-permuta",
      "name": "Dichiarazione di Permuta",
      "description": "Dichiarazione relativa al veicolo ritirato in permuta",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "targaRitirato": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          },
          "marcaRitirato": {
            "type": "string",
            "description": "Marca del veicolo ritirato"
          },
          "modelloRitirato": {
            "type": "string",
            "description": "Modello del veicolo ritirato"
          },
          "kmRitirato": {
            "type": "number",
            "description": "Chilometraggio del veicolo ritirato"
          },
          "valorePermuta": {
            "type": "number",
            "description": "Valore riconosciuto per la permuta in Euro"
          },
          "proprietarioRitirato": {
            "type": "string",
            "description": "Nome e cognome proprietario del veicolo ritirato"
          },
          "codiceFiscaleProprietario": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          }
        },
        "required": [
          "targaRitirato",
          "marcaRitirato",
          "modelloRitirato",
          "valorePermuta",
          "proprietarioRitirato"
        ]
      }
    },
    {
      "id": "doc-identita",
      "name": "Documento d'Identità",
      "description": "Documento di riconoscimento (CI, Passaporto, Patente) per identificazione e Antiriciclaggio",
      "isArrayExtraction": true,
      "jsonSchema": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string",
            "description": "Nome (first name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "cognome": {
            "type": "string",
            "description": "Cognome (surname/family name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "codiceFiscale": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "tipoDocumento": {
            "type": "string",
            "description": "Tipo documento: Carta D'Identità, Passaporto, Patente"
          },
          "numeroDocumento": {
            "type": "string",
            "description": ""
          },
          "dataEmissione": {
            "type": "string",
            "description": "Data di emissione in formato DD.MM.YYYY",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "dataScadenza": {
            "type": "string",
            "description": "Data di scadenza in formato DD.MM.YYYY",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "rilasciatoDa": {
            "type": "string",
            "description": "Autorità che ha rilasciato il documento"
          },
          "luogoNascita": {
            "type": "string",
            "description": "Città seguita dalla sigla della provincia tra parentesi tonde — formato: 'NomeCittà (XX)'"
          },
          "dataNascita": {
            "type": "string",
            "description": "Data di nascita in formato DD.MM.YYYY",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "indirizzoDiResidenza": {
            "type": "string",
            "description": "Indirizzo completo di residenza — formato: Via/Piazza Nome Numero, CAP Città (Provincia)"
          },
          "statoCivile": {
            "type": "string",
            "description": "Stato civile",
            "enum": [
              "celibe",
              "nubile",
              "coniugato",
              "coniugata",
              "vedovo",
              "vedova",
              "divorziato",
              "divorziata",
              "separato",
              "separata",
              null
            ],
            "nullable": true
          }
        },
        "required": [
          "nome",
          "cognome",
          "codiceFiscale",
          "tipoDocumento",
          "numeroDocumento",
          "dataEmissione",
          "dataScadenza",
          "luogoNascita",
          "dataNascita"
        ]
      }
    },
    {
      "id": "doc-contatto",
      "name": "Documento di Contatto",
      "description": "Recapiti e indirizzi del cliente",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string",
            "description": "Nome (first name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "cognome": {
            "type": "string",
            "description": "Cognome (surname/family name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "telefonoCellulare": {
            "type": "string",
            "description": "Numero di cellulare principale"
          },
          "telefonoFisso": {
            "type": "string",
            "description": "Eventuale numero fisso/ufficio"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Indirizzo email"
          },
          "pec": {
            "type": "string",
            "format": "email",
            "description": "Posta Elettronica Certificata"
          },
          "indirizzoResidenza": {
            "type": "string",
            "description": "Via/Piazza e numero civico"
          },
          "cittaResidenza": {
            "type": "string",
            "description": "Comune di residenza"
          },
          "cap": {
            "type": "string",
            "description": "Codice Avviamento Postale"
          },
          "provincia": {
            "type": "string",
            "description": "Sigla Provincia (es. MI, RM)"
          }
        },
        "required": [
          "nome",
          "cognome",
          "telefonoCellulare",
          "email",
          "indirizzoResidenza"
        ]
      }
    },
    {
      "id": "doc-libretto-circolazione",
      "name": "Libretto di Circolazione",
      "description": "Carta di circolazione del veicolo con dati tecnici e intestatario",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "targa": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          },
          "telaio": {
            "type": "string",
            "description": "Numero di telaio / VIN (Vehicle Identification Number) — 17 caratteri alfanumerici"
          },
          "marca": {
            "type": "string",
            "description": "Marca del veicolo (es. FIAT, BMW, Audi)"
          },
          "modello": {
            "type": "string",
            "description": "Modello del veicolo (es. Panda, Serie 3, A4)"
          },
          "allestimento": {
            "type": "string",
            "description": "Versione/allestimento se presente"
          },
          "cilindrata": {
            "type": "number",
            "description": "Cilindrata in cc"
          },
          "potenzaKw": {
            "type": "number",
            "description": "Potenza in kW"
          },
          "alimentazione": {
            "type": "string",
            "description": "Tipo alimentazione",
            "enum": [
              "benzina",
              "diesel",
              "GPL",
              "metano",
              "ibrido",
              "elettrico",
              null
            ],
            "nullable": true
          },
          "dataImmatricolazione": {
            "type": "string",
            "description": "Data di prima immatricolazione",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "massamassimaKg": {
            "type": "number",
            "description": "Massa complessiva in kg"
          },
          "posti": {
            "type": "number",
            "description": "Numero posti a sedere"
          },
          "intestatario": {
            "type": "string",
            "description": "Nome e cognome/ragione sociale intestatario"
          },
          "codiceFiscaleIntestatario": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "classeAmbientale": {
            "type": "string",
            "description": "Classe ambientale (es. Euro 6, Euro 5)"
          }
        },
        "required": [
          "targa",
          "telaio",
          "marca",
          "modello",
          "dataImmatricolazione",
          "intestatario",
          "codiceFiscaleIntestatario"
        ]
      }
    },
    {
      "id": "doc-assicurazione",
      "name": "Polizza Assicurativa RCA",
      "description": "Certificato di assicurazione obbligatoria RC Auto",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "compagnia": {
            "type": "string",
            "description": "Compagnia assicurativa"
          },
          "numeroPolizza": {
            "type": "string",
            "description": "Numero polizza"
          },
          "targa": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          },
          "contraente": {
            "type": "string",
            "description": "Nome e cognome / ragione sociale del contraente"
          },
          "codiceFiscaleContraente": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "decorrenza": {
            "type": "string",
            "description": "Data decorrenza copertura",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "scadenza": {
            "type": "string",
            "description": "Data scadenza copertura",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "massimale": {
            "type": "string",
            "description": "Massimale di copertura"
          },
          "premio": {
            "type": "number",
            "description": "Premio annuale in Euro"
          },
          "classeMerito": {
            "type": "string",
            "description": "Classe di merito (classe bonus/malus)"
          }
        },
        "required": [
          "compagnia",
          "numeroPolizza",
          "targa",
          "contraente",
          "scadenza"
        ]
      }
    },
    {
      "id": "doc-procura",
      "name": "Procura",
      "description": "Mandato a rappresentare — usata quando il passaggio è fatto per delega",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "nomeMandante": {
            "type": "string",
            "description": "Nome (first name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "cognomeMandante": {
            "type": "string",
            "description": "Cognome (surname/family name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "codiceFiscaleMandante": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "nomeMandatario": {
            "type": "string",
            "description": "Nome (first name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "cognomeMandatario": {
            "type": "string",
            "description": "Cognome (surname/family name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "codiceFiscaleMandatario": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "oggetto": {
            "type": "string",
            "description": "Oggetto della procura (es. vendita/acquisto veicolo targa XX000YY)"
          },
          "dataStipula": {
            "type": "string",
            "description": "Data della procura",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          }
        },
        "required": [
          "nomeMandante",
          "cognomeMandante",
          "codiceFiscaleMandante",
          "nomeMandatario",
          "cognomeMandatario",
          "oggetto"
        ]
      }
    },
    {
      "id": "doc-scheda-tecnica",
      "name": "Scheda Tecnica Veicolo",
      "description": "Scheda tecnica/commerciale del veicolo con optionals e allestimento",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "marca": {
            "type": "string",
            "description": "Marca"
          },
          "modello": {
            "type": "string",
            "description": "Modello"
          },
          "allestimento": {
            "type": "string",
            "description": "Livello di allestimento (es. Lounge, Sport, Executive)"
          },
          "annoModello": {
            "type": "number",
            "description": "Anno modello"
          },
          "coloreEsterno": {
            "type": "string",
            "description": "Colore carrozzeria"
          },
          "coloreInterno": {
            "type": "string",
            "description": "Colore e materiale interni"
          },
          "optionals": {
            "type": "string",
            "description": "Lista optionals inclusi (separati da virgola)"
          },
          "prezzoListino": {
            "type": "number",
            "description": "Prezzo di listino in Euro"
          }
        },
        "required": [
          "marca",
          "modello"
        ]
      }
    },
    {
      "id": "doc-tessera-sanitaria",
      "name": "Tessera Sanitaria",
      "description": "Tessera sanitaria / Codice Fiscale — conferma CF e dati anagrafici",
      "isArrayExtraction": true,
      "jsonSchema": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string",
            "description": "Nome (first name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "cognome": {
            "type": "string",
            "description": "Cognome (surname/family name). In Italia, l'ordine standard è: nome prima, cognome dopo (es. Mario Rossi)."
          },
          "codiceFiscale": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "sesso": {
            "type": "string",
            "description": "Sesso",
            "enum": [
              "M",
              "F",
              null
            ],
            "nullable": true
          },
          "dataNascita": {
            "type": "string",
            "description": "Data di nascita",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "luogoNascita": {
            "type": "string",
            "description": "Comune di nascita"
          },
          "dataScadenza": {
            "type": "string",
            "description": "Data di scadenza",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          }
        },
        "required": [
          "nome",
          "cognome",
          "codiceFiscale",
          "sesso",
          "dataNascita"
        ]
      }
    },
    {
      "id": "doc-visura-camerale",
      "name": "Visura Camerale",
      "description": "Visura CCIAA — necessaria quando venditore o acquirente è persona giuridica",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "ragioneSociale": {
            "type": "string",
            "description": "Ragione sociale / denominazione"
          },
          "partitaIva": {
            "type": "string",
            "description": "Partita IVA"
          },
          "codiceFiscale": {
            "type": "string",
            "description": "Codice fiscale dell'impresa"
          },
          "sedeLegale": {
            "type": "string",
            "description": "Indirizzo sede legale"
          },
          "legaleRappresentante": {
            "type": "string",
            "description": "Nome e cognome del legale rappresentante"
          },
          "cfLegaleRappresentante": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "codiceAteco": {
            "type": "string",
            "description": "Codice ATECO principale"
          },
          "statoImpresa": {
            "type": "string",
            "description": "Stato dell'impresa",
            "enum": [
              "attiva",
              "inattiva",
              "cessata",
              "in liquidazione",
              null
            ],
            "nullable": true
          },
          "dataIscrizione": {
            "type": "string",
            "description": "Data iscrizione alla Camera di Commercio",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          },
          "rea": {
            "type": "string",
            "description": "Numero REA"
          }
        },
        "required": [
          "ragioneSociale",
          "partitaIva",
          "legaleRappresentante"
        ]
      }
    },
    {
      "id": "doc-visura-pra",
      "name": "Visura PRA",
      "description": "Visura del Pubblico Registro Automobilistico — gravami, fermi, ipoteche",
      "jsonSchema": {
        "type": "object",
        "properties": {
          "targa": {
            "type": "string",
            "description": "Numero di targa del veicolo (es. AB123CD)"
          },
          "telaio": {
            "type": "string",
            "description": "Numero di telaio / VIN (Vehicle Identification Number) — 17 caratteri alfanumerici"
          },
          "proprietario": {
            "type": "string",
            "description": "Proprietario attuale"
          },
          "codiceFiscaleProprietario": {
            "type": "string",
            "description": "Codice Fiscale di 16 caratteri (extract without spaces - remove all spacing if present)",
            "pattern": "^[A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]$"
          },
          "fermoAmministrativo": {
            "type": "string",
            "description": "Fermo amministrativo presente",
            "enum": [
              "sì",
              "no",
              null
            ],
            "nullable": true
          },
          "ipoteche": {
            "type": "string",
            "description": "Eventuali ipoteche iscritte"
          },
          "gravami": {
            "type": "string",
            "description": "Elenco gravami risultanti"
          },
          "dataVisura": {
            "type": "string",
            "description": "Data della visura",
            "pattern": "^\\d{2}\\.\\d{2}\\.\\d{4}$"
          }
        },
        "required": [
          "targa",
          "proprietario",
          "fermoAmministrativo"
        ]
      }
    }
  ],
  "entityTypes": [
    {
      "id": "entity-venditore",
      "name": "Venditore",
      "icon": "user-minus",
      "color": "#ef4444",
      "displayOrder": 0,
      "fieldOrder": [
        "nome",
        "cognome",
        "codiceFiscale",
        "indirizzoDiResidenza",
        "dataNascita",
        "luogoNascita",
        "statoCivile"
      ],
      "dataSources": [
        {
          "docTypeId": "doc-identita",
          "enabled": true,
          "isRequired": true,
          "canCreateEntity": true,
          "fieldMappings": [
            {
              "sourceField": "nome",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "cognome",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "codiceFiscale",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "dataNascita",
              "targetField": "dataNascita",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "luogoNascita",
              "targetField": "luogoNascita",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "indirizzoDiResidenza",
              "targetField": "indirizzoDiResidenza",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "statoCivile",
              "targetField": "statoCivile",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-tessera-sanitaria",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "nome",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "cognome",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "codiceFiscale",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "dataNascita",
              "targetField": "dataNascita",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-atto-vendita",
          "enabled": true,
          "canCreateEntity": true,
          "fieldMappings": [
            {
              "sourceField": "venditore.nome",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "venditore.cognome",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "venditore.codiceFiscale",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "venditore.indirizzo",
              "targetField": "indirizzoDiResidenza",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "venditore.statoCivile",
              "targetField": "statoCivile",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-certificato-proprieta",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "proprietario",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "codiceFiscaleProprietario",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-contatto",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "nome",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "cognome",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-procura",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "nomeMandante",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "cognomeMandante",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "codiceFiscaleMandante",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        }
      ],
      "conditionalRequirements": [
        {
          "docTypeId": "doc-visura-camerale",
          "enabled": true,
          "conditions": [
            {
              "sourceDocTypeId": "doc-atto-vendita",
              "field": "venditore.codiceFiscale",
              "operator": "lengthGreaterThan",
              "value": "11"
            }
          ]
        }
      ]
    },
    {
      "id": "entity-acquirente",
      "name": "Acquirente",
      "icon": "user-plus",
      "color": "#22c55e",
      "displayOrder": 1,
      "fieldOrder": [
        "nome",
        "cognome",
        "codiceFiscale",
        "indirizzoDiResidenza",
        "dataNascita",
        "luogoNascita",
        "statoCivile"
      ],
      "dataSources": [
        {
          "docTypeId": "doc-identita",
          "enabled": true,
          "isRequired": true,
          "canCreateEntity": true,
          "fieldMappings": [
            {
              "sourceField": "nome",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "cognome",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "codiceFiscale",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "dataNascita",
              "targetField": "dataNascita",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "luogoNascita",
              "targetField": "luogoNascita",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "indirizzoDiResidenza",
              "targetField": "indirizzoDiResidenza",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "statoCivile",
              "targetField": "statoCivile",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-tessera-sanitaria",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "nome",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "cognome",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "codiceFiscale",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "dataNascita",
              "targetField": "dataNascita",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-atto-vendita",
          "enabled": true,
          "canCreateEntity": true,
          "fieldMappings": [
            {
              "sourceField": "acquirente.nome",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "acquirente.cognome",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "acquirente.codiceFiscale",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "acquirente.indirizzo",
              "targetField": "indirizzoDiResidenza",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "acquirente.statoCivile",
              "targetField": "statoCivile",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-finanziamento",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "nomeCliente",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "codiceFiscaleCliente",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-contatto",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "nome",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "cognome",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-procura",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "nomeMandante",
              "targetField": "nome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "cognomeMandante",
              "targetField": "cognome",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "codiceFiscaleMandante",
              "targetField": "codiceFiscale",
              "matchFields": [
                {
                  "field": "codiceFiscale",
                  "fuzzyThreshold": 0.2
                },
                {
                  "field": "nome",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "cognome",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        }
      ],
      "conditionalRequirements": [
        {
          "docTypeId": "doc-visura-camerale",
          "enabled": true,
          "conditions": [
            {
              "sourceDocTypeId": "doc-atto-vendita",
              "field": "acquirente.codiceFiscale",
              "operator": "lengthGreaterThan",
              "value": "11"
            }
          ]
        },
        {
          "docTypeId": "doc-finanziamento",
          "enabled": true,
          "conditions": [
            {
              "sourceDocTypeId": "doc-atto-vendita",
              "field": "modalitaPagamento",
              "operator": "contains",
              "value": "finanz"
            }
          ]
        }
      ]
    },
    {
      "id": "entity-veicolo",
      "name": "Veicolo",
      "icon": "car",
      "color": "#3b82f6",
      "displayOrder": 2,
      "fieldOrder": [
        "targa",
        "telaio",
        "marca",
        "modello",
        "allestimento",
        "dataImmatricolazione",
        "cilindrata",
        "potenzaKw",
        "alimentazione",
        "classeAmbientale",
        "km"
      ],
      "dataSources": [
        {
          "docTypeId": "doc-libretto-circolazione",
          "enabled": true,
          "isRequired": true,
          "canCreateEntity": true,
          "fieldMappings": [
            {
              "sourceField": "targa",
              "targetField": "targa",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "telaio",
              "targetField": "telaio",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "marca",
              "targetField": "marca",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "modello",
              "targetField": "modello",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "allestimento",
              "targetField": "allestimento",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "dataImmatricolazione",
              "targetField": "dataImmatricolazione",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "cilindrata",
              "targetField": "cilindrata",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "potenzaKw",
              "targetField": "potenzaKw",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "alimentazione",
              "targetField": "alimentazione",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "classeAmbientale",
              "targetField": "classeAmbientale",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-certificato-proprieta",
          "enabled": true,
          "isRequired": true,
          "canCreateEntity": true,
          "fieldMappings": [
            {
              "sourceField": "targa",
              "targetField": "targa",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "telaio",
              "targetField": "telaio",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-visura-pra",
          "enabled": true,
          "isRequired": true,
          "fieldMappings": [
            {
              "sourceField": "targa",
              "targetField": "targa",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "telaio",
              "targetField": "telaio",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-atto-vendita",
          "enabled": true,
          "canCreateEntity": true,
          "fieldMappings": [
            {
              "sourceField": "targa",
              "targetField": "targa",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "telaio",
              "targetField": "telaio",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "marca",
              "targetField": "marca",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "modello",
              "targetField": "modello",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "km",
              "targetField": "km",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-assicurazione",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "targa",
              "targetField": "targa",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-revisione",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "targa",
              "targetField": "targa",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "kmRevisione",
              "targetField": "km",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-garanzia",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "targa",
              "targetField": "targa",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        },
        {
          "docTypeId": "doc-scheda-tecnica",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "marca",
              "targetField": "marca",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "modello",
              "targetField": "modello",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            },
            {
              "sourceField": "allestimento",
              "targetField": "allestimento",
              "matchFields": [
                {
                  "field": "targa",
                  "fuzzyThreshold": 0
                },
                {
                  "field": "telaio",
                  "fuzzyThreshold": 0
                }
              ]
            }
          ]
        }
      ],
      "conditionalRequirements": [
        {
          "docTypeId": "doc-revisione",
          "enabled": true,
          "conditions": [
            {
              "sourceDocTypeId": "doc-libretto-circolazione",
              "field": "dataImmatricolazione",
              "operator": "exists",
              "value": "true"
            }
          ]
        }
      ]
    },
    {
      "id": "entity-transazione",
      "name": "Transazione",
      "icon": "banknote",
      "color": "#f59e0b",
      "displayOrder": 3,
      "fieldOrder": [
        "prezzo",
        "modalitaPagamento",
        "dataVendita",
        "km",
        "valorePermuta",
        "importoFinanziato",
        "importoRata",
        "durataRateMesi"
      ],
      "dataSources": [
        {
          "docTypeId": "doc-atto-vendita",
          "enabled": true,
          "isRequired": true,
          "canCreateEntity": true,
          "fieldMappings": [
            {
              "sourceField": "prezzo",
              "targetField": "prezzo"
            },
            {
              "sourceField": "dataVendita",
              "targetField": "dataVendita"
            },
            {
              "sourceField": "km",
              "targetField": "km"
            },
            {
              "sourceField": "modalitaPagamento",
              "targetField": "modalitaPagamento"
            }
          ]
        },
        {
          "docTypeId": "doc-finanziamento",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "importoFinanziato",
              "targetField": "importoFinanziato"
            },
            {
              "sourceField": "importoRata",
              "targetField": "importoRata"
            },
            {
              "sourceField": "durataRateMesi",
              "targetField": "durataRateMesi"
            },
            {
              "sourceField": "tan",
              "targetField": "tan"
            },
            {
              "sourceField": "taeg",
              "targetField": "taeg"
            }
          ]
        },
        {
          "docTypeId": "doc-permuta",
          "enabled": true,
          "fieldMappings": [
            {
              "sourceField": "valorePermuta",
              "targetField": "valorePermuta"
            }
          ]
        }
      ],
      "conditionalRequirements": []
    }
  ]
}